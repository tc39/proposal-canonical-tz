<!doctype html>
<meta charset="utf8">

<emu-clause id="sec-canonical-tz-intl">
  <h1>Amendments to the ECMAScript® 2024 Internationalization API Specification</h1>

  <emu-note type="editor">
    <p>
      This section lists amendments which must be made to <a href="https://tc39.es/ecma402/">ECMA-402, the ECMAScript® 2024 Internationalization API Specification</a>.
      Text to be added is marked <ins>like this</ins>, and text to be deleted is marked <del>like this</del>.
    </p>
    <p>
      This text is based on top of the ECMA-402 spec text from <a href="https://github.com/tc39/proposal-temporal/pull/2573">https://github.com/tc39/proposal-temporal/pull/2573</a>.
    </p>
  </emu-note>

  <emu-clause id="sup-time-zone-identifiers">
    <h1>Time Zone Identifiers</h1>

    <emu-note type="editor">
      <p>
        Only one paragraph should be inserted into this (long) section.
        The paragraph above and below (which have no changes from the base specification text) are included for context and to help with diffs.
        The rest of the existing section's text should not be changed by this proposal, and so is not included here.
      </p>
    </emu-note>

    <p>
      New Zone identifiers can be added to the IANA Time Zone Database, for example when one part of a country starts observing Daylight Saving Time differently from other parts, or when a new country declares independence.
      ECMAScript implementations are recommended to include newly-added identifiers as soon as possible into the results of AvailableTimeZoneIdentifiers.
      Such prompt action ensures that ECMAScript programs receiving those identifiers from an external source (including the host's operating system) will be able to recognize and calculate using the new time zone.
    </p>

    <ins class="block">
      <p>
        Although the IANA Time Zone Database maintainers strive for stability, in rare cases identifiers will be renamed.
        For example, the IANA Time Zone Database's 2022b release added "*Europe/Kyiv*" as a new Zone and demoted "*Europe/Kiev*" to be a Link to the new Zone.
        To reduce disruption from these renaming changes, ECMAScript implementations are encouraged to initially add the new name as a non-primary time zone identifier that resolves to the old primary identifier.
        Then, after a waiting period, implementations are recommended to promote the new Zone to a primary time zone identifier while simultaneously demoting the deprecated name to non-primary.
        The recommended waiting period is two years (TODO: may change) after the IANA Time Zone Database release containing the changes.
        This is long enough to allow most other systems that ECMAScript programs may interact with to "catch up" with the change so that the new zone is recognized.
        Note that this waiting period should only apply to cases where an existing Zone is replaced by a new Zone name.
        If an existing Zone and Link are swapped, then no waiting period is recommended.
      </p>
    </ins>

    <p>
      It is recommended that implementations maintain a fully consistent copy of the IANA Time Zone Database for the lifetime of each agent.
      If implementations do revise time zone information during the lifetime of an agent, then it is recommended that changes to time zone data, including which identifiers are supported, the primary time zone identifier associated with any identifier, and the UTC offsets and transitions associated with any Zone, can be incorporated into an agent only if they are consistent with results already observed by all ECMAScript code that can reach that agent.
      For example, it is recommended that a new identifier can be incorporated only if no ECMAScript code has already tried to use it, and it is recommended that replacement of a primary identifier with a Link to a different identifier can only be incorporated only if no ECMAScript code has already resulted in resolving it as primary.
      The complexity of maintaining such invariants is why it is recommended that implementations maintain a fully consistent copy of the IANA Time Zone Database for the lifetime of each agent.
    </p>
  </emu-clause>
</emu-clause>
